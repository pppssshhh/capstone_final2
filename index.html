<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exchange Now</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body bgcolor='#f5f5f5'>
    <h1 id="title">Exchange Now</h1>
    <h2 id="sub_title">CWNU Capstone 2023</h2>

    <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FblTdQu%2FbtsyPY1H8Bs%2FoRwfWp48oDWCSmsQAUTYBk%2Fimg.png"
        width="300" height="300" alt="logo" id="logo-image">

    <select id="currency-select">
        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
        <option value="USD">ë¯¸êµ­ USD</option>
        <option value="JPY">ì¼ë³¸ JPY</option>
        <option value="EUR">ìœ ëŸ½ EUR</option>
        <option value="CAD">ìºë‚˜ë‹¤ CAD</option>
        <option value="AUD">í˜¸ì£¼ AUD</option>
    </select>


    <button id="goToOtherPage">
        <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FnUj83%2FbtsyULQvuzM%2FOKZE3HTlp6rdxbdMTZGn90%2Fimg.png"
            width="25" height="25">
    </button>

    <script>
        const currencySelect = document.getElementById('currency-select');
        const cameraButton = document.getElementById('goToOtherPage');
    
        currencySelect.addEventListener('change', function () {
            // êµ­ê°€ ì„ íƒì´ ë³€ê²½ë  ë•Œ
            if (currencySelect.value) {
                // êµ­ê°€ê°€ ì„ íƒëœ ê²½ìš° ì¹´ë©”ë¼ ë²„íŠ¼ í™œì„±í™”
                cameraButton.removeAttribute('disabled');
            } else {
                // ì„ íƒì„ í•´ì œí•œ ê²½ìš° ì¹´ë©”ë¼ ë²„íŠ¼ ë¹„í™œì„±í™”
                cameraButton.setAttribute('disabled', 'disabled');
            }
        });
    
        cameraButton.addEventListener('click', function () {
            // ì¹´ë©”ë¼ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            const selectedCurrency = currencySelect.value;
            if (selectedCurrency) {
                // ì„ íƒí•œ êµ­ê°€ê°€ ìˆë‹¤ë©´ í˜ì´ì§€ ì´ë™ (detect.htmlë¡œ ì´ë™í•˜ë©´ì„œ ì„ íƒí•œ êµ­ê°€ ê°’ì„ URL ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬)
                window.location.href = `detect.html?currency=${selectedCurrency}`;
            }
        });
    </script>

    <script> //usd í™˜ìœ¨ ì •ë³´
        let usd_price;
        const usd_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd/krw.json";

        fetch(usd_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                usd_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ usd_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const usdCell = document.getElementById('usd-cell');
                usdCell.textContent = usd_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”

                // 'í™˜ìœ¨()' ê´„í˜¸ ì•ˆì— data.date ì‚½ì…
                const exchangeElement = document.getElementById('exchange');
                exchangeElement.textContent = `í™˜ìœ¨ (${data.date})`;
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //jpy í™˜ìœ¨ ì •ë³´
        let jpy_price;
        const jpy_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/jpy/krw.json";

        fetch(jpy_url)
            .then(response => response.json())
            .then(data => {
                jpy_price = parseInt(data.krw * 100);

                const jpyCell = document.getElementById('jpy-cell');
                jpyCell.textContent = jpy_price.toLocaleString() + ' KRW';
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //eur í™˜ìœ¨ ì •ë³´
        let eur_price;
        const eur_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/eur/krw.json";

        fetch(eur_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                eur_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ eur_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const eurCell = document.getElementById('eur-cell');
                eurCell.textContent = eur_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”

                // 'í™˜ìœ¨()' ê´„í˜¸ ì•ˆì— data.date ì‚½ì…
                const exchangeElement = document.getElementById('exchange');
                exchangeElement.textContent = `í™˜ìœ¨ (${data.date})`;
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //cad í™˜ìœ¨ ì •ë³´
        let cad_price;
        const cad_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/cad/krw.json";

        fetch(cad_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                cad_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ cad_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const cadCell = document.getElementById('cad-cell');
                cadCell.textContent = cad_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”

                // 'í™˜ìœ¨()' ê´„í˜¸ ì•ˆì— data.date ì‚½ì…
                const exchangeElement = document.getElementById('exchange');
                exchangeElement.textContent = `í™˜ìœ¨ (${data.date})`;
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //aud í™˜ìœ¨ ì •ë³´
        let aud_price;
        const aud_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/aud/krw.json";

        fetch(aud_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                aud_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ aud_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const audCell = document.getElementById('aud-cell');
                audCell.textContent = aud_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <h3 id='exchange'></h3>
    <table width="300" height="100">
        <tbody>
            <tr>
                <td align="left">ğŸ‡ºğŸ‡¸ ë¯¸êµ­ USD</td>
                <td align="right" id="usd-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡¯ğŸ‡µ ì¼ë³¸ JPY</td>
                <td align="right" id="jpy-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡ªğŸ‡º ìœ ëŸ½ EUR</td>
                <td align="right" id="eur-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡¨ğŸ‡¦ ìºë‚˜ë‹¤ CAD</td>
                <td align="right" id="cad-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡¦ğŸ‡º í˜¸ì£¼ AUD</td>
                <td align="right" id="aud-cell"></td>
            </tr>
        </tbody>
    </table>


</html>